<!DOCTYPE>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>

<style>
*{ margin:0; padding:0}
li{ list-style:none;}
.box1{ width:100px; height:100px; background:red; position:absolute; left:100px; top:100px;}
.box2{ width:100px; height:100px; background:yellow; position:absolute; left:250px; top:50px;}
.box3{ width:100px; height:100px; background:blue; position:absolute; left:400px; top:100px;}
#wrap{width:570px; height:420px; margin:50px auto; position: relative;}
#wrap input{ z-index:999; position:absolute; top:180px; border-radius:50px; background:#333; color:#fff;  padding:15px 30px;}
#wrap input:first-child{ left:-100px;}
#wrap input.an2{ right:-100px;}
.list{ width:570px; height:420px;  -webkit-perspective:600px; -webkit-transform-style:preserve-3d; position:absolute; left:0px; top:0px;}
.list li{ width:55px; height:58px; float:left; background:#C6F; border:solid 1px rgba(0,0,0,0); background:url(image/10.jpg) no-repeat; background-origin:border-box; }
.list:nth-of-type(2) li{ background:url(image/31220076_1392274799959_800x600.jpg)}
.list:nth-of-type(3) li{ background:url(image/20160801009.jpg)}
.list:nth-of-type(4) li{ background:url(image/ChMkJlbKxNKIDhk8AAesl4tiKaEAALHMwFU4EEAB6yv597.jpg)}
.list:nth-of-type(5) li{ background:url(image/ChMkJlbKxo2IL-aCAB_LvfnrTBUAALHmwO5VTgAH8vV931.jpg)}

</style>

<script>
 window.onload = function(){
	 var oList = document.getElementById("wrap");
	 var aUl = oList.getElementsByTagName("ul");
	 var aInput = document.getElementsByTagName("input");
	 var iRows = oList.offsetHeight/aUl[0].children[0].offsetHeight;
	 var iCeils = aUl[0].children.length/iRows;
	 var iNow=0;
	 var aXyLi=[];
	 aInput[0].onclick = function (){		 
		 if(iNow<=0){
			 return;
			 }
			 iNow--;
			 aUl[iNow].style.visibility = 'visible';
			 aUl[iNow].children[0].removeEventListener("webkitTransitionEnd",end,false);
		 tab(aXyLi[iNow],0,0, function(){	
				   with(this.style){

					    transition=" 0.5s background, 0.1s border, 0.1s 0.1s box-shadow, 1s 0.3s -webkit-transform ease-in, 1s opacity ease-in";
					   borderColor = "rgba(0,0,0,0)";
					   boxShadow = "0 0 0px blue";
					   WebkitTransform = "translate(0,0px) rotateY(0deg) rotateX(0deg) ";
					   opacity=1;
					   }			   
				  },50,1,1);
		 };
	
	aInput[1].onclick = function (){
		if(iNow>=aXyLi.length-1){
			return
			}
		 tab(aXyLi[iNow],iCeils-1,iRows-1, function(){
				   with(this.style){
					  transition=" 0.5s background, 0.2s border, 0.3s 0.1s box-shadow, 2s 0.3s -webkit-transform, 2s 0.3s opacity";
					   borderColor = "rgba(0,0,0,0.8)";
					   boxShadow = "0 0 20px blue";
					   WebkitTransform = "translate(-50px,-100px) rotateY(-720deg) rotateX(-540deg) ";
					   
					   opacity=0;
					   }	
					   if(this.xIndex==0 && this.yIndex==0){
						   this.addEventListener("webkitTransitionEnd",end,false)
						   }				   
				  },50,-1,-1);
				  iNow++;
		 };	 
	 
	 for(var i=0; i<aUl.length; i++){
		 var aLi=aUl[i].getElementsByTagName("li");
		  aUl[i].style.zIndex = aUl.length-i;
		  aXyLi.push(setXy(aLi,iRows,iCeils));
		  aUl[i].onclick= (function(a){
			  return function(){
				  alert(a)
				  }
			  })(i);
		 }
		
	 }
	 function end(e){if(e.propertyName=='-webkit-transform'){this.parentNode.style.visibility="hidden";} }
	 function tab(arr,x,y,fn,iDelay,iSpeedY,iSpeedX){
		 if( !arr[y] || !arr[y][x]){
			 return;
			 }
		 if(fn){
			 fn.call(arr[y][x]);
			 clearTimeout(arr[y][x].timer)
			 arr[y][x].timer = setTimeout(function(){
				  tab(arr,x,y+iSpeedY,fn,iDelay,iSpeedY,iSpeedX);
			      tab(arr,x+iSpeedX,y,fn,iDelay,iSpeedY,iSpeedX);
				 },iDelay)
			 }
		 }
	 
   function setXy(obj,iRows,iCeils){
	   var arr=[];
	   for(var i=0; i<iRows; i++){
		    var arr2=[];
		     for(var j=0; j<iCeils; j++){
				    obj[i*iCeils+j].xIndex = j;
					obj[i*iCeils+j].yIndex = i;
					obj[i*iCeils+j].style.backgroundPosition = -(j*57)+'px -' + (i*60)+'px';
					arr2.push(obj[i*iCeils+j])
				 }
			arr.push(arr2)
		   }
		   return arr;
	   }	 
</script>
</head>

<body>





<div id="wrap">
<input type="button" value="〈" />
<ul class="list">
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
</ul>
<ul class="list">
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
</ul>
<ul class="list">
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
</ul>
<ul class="list">
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
</ul>
<ul class="list">
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
</ul>
<input type="button" value="〉" class="an2" />
</div>


       
</body>
</html>
